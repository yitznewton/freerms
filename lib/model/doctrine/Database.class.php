<?php

/**
 * Database
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    freerms
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Database extends BaseDatabase
{
  /**
   * @return array int[]
   */
  public function getLibraryIds()
  {
    $ids = array();

    foreach ($this->getLibraries() as $library) {
      $ids[] = $library->getId();
    }

    return $ids;
  }

  /**
   * @return array
   */
  public function getAdditionalFieldsArray()
  {
    if (!is_string($this->getAdditionalFields())) {
      // TODO: evaluate whether this is really the best way of handling this
      // edge case, which "should never happen" because of form validation
      return null;
    }

    return sfYaml::load($this->getAdditionalFields());
  }

  /**
   * Returns a copy of the Database with certain unique elements unset
   *
   * @param bool $deep whether to copy relations
   * @return Database
   */
  public function copy($deep = false)
  {
    $copy = parent::copy($deep);

    $copy->setLibraries($this->getLibraries());
    $copy->setSubjects($this->getSubjects());

    $copy->setAltId(null);

    return $copy;
  }
}

